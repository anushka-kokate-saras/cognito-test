<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h3>You have successfully logged in</h3>
    <p><a href="https://testappdemo.auth.us-east-2.amazoncognito.com/login?client_id=7nq57bftb4bqj0jlvjpk8716tv&response_type=code&scope=aws.cognito.signin.user.admin+email+openid+phone+profile&redirect_uri=https%3A%2F%2Fanushka-kokate-saras.github.io%2Fcognito-test%2Flogged_in.html"> Logout </a></p>
</body>
<script>
    const urlParams = new URLSearchParams(window.location.search);
    const getCode = urlParams.get("code");
    console.log(getCode);
    
    const tokenEndpoint = 'https://testappdemo.auth.us-east-2.amazoncognito.com/oauth2/token';
    const clientId = '7nq57bftb4bqj0jlvjpk8716tv'; // Your Cognito Client ID
    const clientSecret = '54u6q3rc38no29soft84e6m8kigb5uvjv53g6deii6poq9oj8w'; // Your Cognito Client Secret
    const redirectUri = 'https://anushka-kokate-saras.github.io/cognito-test/logged_in.html'; // Your Redirect URI
    
    const formData = new URLSearchParams();
    formData.append('grant_type', 'authorization_code');
    formData.append('code', getCode);
    formData.append('redirect_uri', redirectUri);
    
    // Combine client ID and client secret into a Base64-encoded string
    const base64Client = btoa(`${clientId}:${clientSecret}`);
    
    // Add the client credentials to the headers
    const headers = {
        'Authorization': `Basic ${base64Client}`,
    };
    
    fetch(tokenEndpoint, {
        method: 'POST',
        headers: headers,
        body: formData,
    })
    .then(response => response.json())
    .then(data => {
        const idToken = data.id_token;
        console.log(idToken);
    })
    .catch(error => {
        console.error(error);
    });
</script>
</html>
